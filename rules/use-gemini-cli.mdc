---
description: Delegate large codebase analysis to Gemini CLI when context limits are exceeded
alwaysApply: true
---

# Gemini CLI Delegation

You have access to `gemini` CLI for tasks that exceed your context window or require full-codebase analysis.

## When to Use Gemini CLI (Check This First!)

**DELEGATE TO GEMINI when ANY of these apply:**

| Trigger | Example |
|---------|---------|
| Need to analyze >10 files | "Find all usages of X across the codebase" |
| Full codebase understanding | "Explain the architecture" |
| Pattern search at scale | "Find all API endpoints" |
| Cross-module tracing | "How does data flow from A to B?" |
| Security/quality audit | "Find potential vulnerabilities" |
| Migration impact analysis | "What would break if we upgrade X?" |

**HANDLE DIRECTLY when:**
- Single file questions
- Specific function/class questions
- Tasks where you already have the relevant files in context

## How to Use

```bash
# Full codebase analysis
gemini -C "$(pwd)" "Analyze the architecture of this codebase. Identify main components, patterns, and data flow."

# Specific pattern search
gemini -C "$(pwd)" "Find all REST API endpoints. List each with its path, method, and handler function."

# Targeted analysis (specific directory)
gemini -C "$(pwd)/src/domain" "Explain the domain model and entity relationships."
```

## Command Pattern

```bash
gemini -C "$(pwd)" "<specific, detailed prompt>"
```

**Prompt tips:**
- Be specific: "Find ALL instances of..." not "Look for..."
- Request structure: "List as a table with columns..."
- Ask for locations: "Include file paths and line numbers"

## Integration with Context System

After Gemini provides insights about the codebase:
1. Store key findings in `.git/local-context/`
2. Create flow documents for features discovered
3. Update glossary with domain terms learned

**Example workflow:**
```bash
# 1. Ask Gemini about architecture
gemini -C "$(pwd)" "Explain how user authentication works end-to-end"

# 2. Store the knowledge locally
cursor-context flow authentication
# (paste/summarize Gemini's findings)
```

## Quick Reference

| Task | Command |
|------|---------|
| Architecture overview | `gemini -C "$(pwd)" "Analyze the overall architecture..."` |
| Find patterns | `gemini -C "$(pwd)" "Find all instances of [pattern]..."` |
| Trace feature | `gemini -C "$(pwd)" "Trace how [feature] is implemented..."` |
| Security audit | `gemini -C "$(pwd)" "Identify potential security issues..."` |
| Dependency analysis | `gemini -C "$(pwd)" "Analyze dependencies and their usage..."` |
